@page "/"
@using ParkPal.Components.Layout
@layout TopNav

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="/bootstrap/CSS/darkmode.css">
    <link rel="stylesheet" href="/bootstrap/CSS/Parkpaldesign.css">
</head

<body>

    <div class="container">
        <div class="signup-box">
            <h1>Sign Up</h1>
            <input type="text" placeholder="Full Name">
            <div class="message" id="nameMessage"></div>

             <input type="tel" placeholder="Phone Number">
             <div class="message" id="phoneMessage"></div>
            <input type="email" placeholder="Email">
            <div class="message" id="emailMessage"></div>
            <input type="password" placeholder="Password" onkeyup="checkPasswordStrength(this.value)">
            <div id="password-strength"></div>
            <div class="message" id="passwordMessage"></div>
            <button onclick="return validateSignUpForm()">Sign Up</button>
            <p>Already have an account? <a href="#" onclick="redirectToLogin()">Login</a></p>
        </div>
        <div class="login-box" style="display: none;">
            <h1>Login</h1>
            <input type="email" placeholder="Email">
            <input type="password" placeholder="Password">
            <button onclick="return validateLoginForm()">Login</button>
            <p>Don't have an account? <a href="#" onclick="showSignup()">Sign Up</a></p>
        </div>
    </div>
    <script>
        
        // displays the login form and hides the signup form
        function showLogin() {
            const signUpBox = document.querySelector('.signup-box');
             const loginBox = document.querySelector('.login-box');

            signUpBox.style.display = 'none';
            loginBox.style.display = 'block';
        }

        // displays the signup form and hides the login form
        function showSignup() {
            const signUpBox = document.querySelector('.signup-box');
            const loginBox = document.querySelector('.login-box');

            signUpBox.style.display = 'block';
             loginBox.style.display = 'none';
        } 

        //checks if password is "strong"
        function checkPasswordStrength(password) {
            const strengthDiv = document.getElementById('password-strength');
            const strengthMessage = document.getElementById('passwordMessage');
            const strongRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})$/;

            if (strongRegex.test(password)) {
                strengthDiv.innerHTML = 'Strong';
                strengthDiv.className = 'strong';
                 strengthMessage.style.display = 'none';
            } else {
                strengthDiv.innerHTML = 'Weak';
                strengthDiv.className = 'weak';
                 strengthMessage.style.display = 'block';
                 strengthMessage.innerHTML = 'Password is weak';
            }
        }

        //makes sure info entered is valid 
        function validateSignUpForm() {
            const fullNameInput = document.querySelector('.signup-box input[type="text"]');
            const phoneInput = document.querySelector('.signup-box input[type="tel"]');
            const emailInput = document.querySelector('.signup-box input[type="email"]');
            const passwordInput = document.querySelector('.signup-box input[type="password"]');

            const fullName = fullNameInput.value;
            const phoneNumber = phoneInput.value;
            const email = emailInput.value;
            const password = passwordInput.value;

            const fullNameMessage = document.getElementById('nameMessage');
            const phoneMessage = document.getElementById('phoneMessage');
             const emailMessage = document.getElementById('emailMessage');
             const passwordMessage = document.getElementById('passwordMessage');

             //using regex to verfiy the input

            if (!/^[a-zA-Z\s]{3,}$/.test(fullName)) {
                fullNameMessage.style.display = 'block';
                fullNameMessage.innerHTML = 'Invalid name';
                return false;
            } else {
                fullNameMessage.style.display = 'none';
            }

            if (!/^[0-9]+$/.test(phoneNumber)) {
                phoneMessage.style.display = 'block';
                phoneMessage.innerHTML = 'Invalid phone number';
                return false;
            } else {
                phoneMessage.style.display = 'none';
            }

            if (!/\S+\S+\.\S+/.test(email)) {
                emailMessage.style.display = 'block';
                emailMessage.innerHTML = 'Invalid email';
                return false;
            } else {
                emailMessage.style.display = 'none';
            }

            const strongRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/;
            if (!strongRegex.test(password)) {
                passwordMessage.style.display = 'block';
                passwordMessage.innerHTML = 'Password is weak';
                return false;
            } else {
                const strengthDiv = document.getElementById('password-strength');
                strengthDiv.innerHTML = 'Strong';
                strengthDiv.className = 'strong';
                passwordMessage.style.display = 'none';
            }

            return true;
        }

        //makes sure login info is valid
        function validateLoginForm() {
            const emailInput = document.querySelector('.login-box input[type="email"]');
            const passwordInput = document.querySelector('.login-box input[type="password"]');

             const email = emailInput.value;
            const password = passwordInput.value;

            if (email.trim() === '' || password.trim() === '') {
                alert('Please enter both email and password.');
                return false;
            }

            return true;
        }

        function redirectToLogin() {
            window.location.href = 'https://localhost:7279/Login';
        }
    </script>
    <script src="/bootstrap/JS/darkmode.js"></script>
</body>










